# ๐ MAPA VISUAL โ FASE 5 (UI de Cadastro/Ediรงรฃo)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ANรLISE DA FASE 5 โ STATUS VISUAL                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 1. REQUISITO ORIGINAL (Fase 5 do TODO.md)                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  "Tela 'Gerenciar Exames': lista exames carregados; formulรกrio          โ
โ   Novo/Editar com campos do schema; validar e salvar em                 โ
โ   config/exams/<slug>.json; recarregar registry."                       โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

                                    โ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 2. COMPONENTES ESPERADOS (Fase 5 Completa)                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  UI Layer:                                                               โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ            โ
โ  โ  Gerenciar Exames Window (Registry-Based)              โ            โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ            โ
โ  โ  โ [Novo] [Editar] [Excluir] [Recarregar Registry]โ   โ            โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ            โ
โ  โ                                                         โ            โ
โ  โ  Exames Carregados (do Registry):                       โ            โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ            โ
โ  โ  โ โข VR1e2 Biomanguinhos 7500   (source: JSON)   โ   โ            โ
โ  โ  โ โข ZDC Biomanguinhos 7500     (source: JSON)   โ   โ            โ
โ  โ  โ โข VR1                        (source: CSV)    โ   โ            โ
โ  โ  โ โข VR2                        (source: CSV)    โ   โ            โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ            โ
โ  โ                                                         โ            โ
โ  โ  Formulรกrio (6 abas):                                   โ            โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ            โ
โ  โ  โ[Bรกsico][Alvos][Faixas][RP][Export][Controles]โ   โ            โ
โ  โ  โ                                                 โ   โ            โ
โ  โ  โ TAB "Bรกsico":                                   โ   โ            โ
โ  โ  โ  Nome Exame:      [________________]           โ   โ            โ
โ  โ  โ  Slug:            [________________]           โ   โ            โ
โ  โ  โ  Equipamento:     [________________]           โ   โ            โ
โ  โ  โ  Tipo Placa:      [48       โผ]                โ   โ            โ
โ  โ  โ  Esquema Agrup:   [96->48   โผ]                โ   โ            โ
โ  โ  โ  Kit Cรณdigo:      [________________]           โ   โ            โ
โ  โ  โ                                                 โ   โ            โ
โ  โ  โ  [Salvar] [Cancelar]                           โ   โ            โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ            โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ            โ
โ                                                                          โ
โ  Fluxo de Dados:                                                         โ
โ    Clique [Novo]                                                         โ
โ       โ                                                                  โ
โ    Formulรกrio vazio (6 abas)                                             โ
โ       โ                                                                  โ
โ    Usuรกrio preenche todos campos                                         โ
โ       โ                                                                  โ
โ    [Salvar]                                                              โ
โ       โ                                                                  โ
โ    Validar:                                                              โ
โ      โข nome_exame โ� vazio                                                โ
โ      โข tipo_placa = nรบmero                                               โ
โ      โข faixas_ct.detect_max < inconc_min < inconc_max                    โ
โ      โข alvos โ� vazio                                                     โ
โ       โ                                                                  โ
โ    Salvar em: config/exams/vr1e2_biomanguinhos_7500.json                โ
โ       โ                                                                  โ
โ    Recarregar Registry:                                                  โ
โ      registry.load()  โ lรช CSV + JSON novo                               โ
โ       โ                                                                  โ
โ    โ Exame apareรงa na lista                                              โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

                                    โ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 3. COMPONENTES IMPLEMENTADOS ATUALMENTE                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  โ CadastrosDiversosWindow em services/cadastros_diversos.py (905 L)  โ
โ                                                                          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                โ
โ  โ  Cadastros Diversos (4 Abas CSV-Based)             โ                โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ                โ
โ  โ  โ [Novo] [Salvar] [Excluir] [Recarregar]    โ   โ                โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ                โ
โ  โ                                                    โ                โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ                โ
โ  โ  โ[Exames][Equipam][Placas][Regras] โ ABAS   โ   โ                โ
โ  โ  โ                                             โ   โ                โ
โ  โ  โ TAB "Exames": Edita banco/exames_config.csvโ   โ                โ
โ  โ  โ                                             โ   โ                โ
โ  โ  โ  [Tabela CSV]     | [Formulรกrio 5-campos]  โ   โ                โ
โ  โ  โ  โข VR1e2...       | Nome Exame: [___]      โ   โ                โ
โ  โ  โ  โข ZDC...         | Modulo: [___]          โ   โ                โ
โ  โ  โ  โข VR1            | Tipo Placa: [___]      โ   โ                โ
โ  โ  โ  โข VR2            | Kit: [___]             โ   โ                โ
โ  โ  โ                   | Equipamento: [___]     โ   โ                โ
โ  โ  โ                                             โ   โ                โ
โ  โ  โ TAB "Equipamentos": Edita banco/equipam.csvโ   โ                โ
โ  โ  โ TAB "Placas": Edita banco/placas.csv       โ   โ                โ
โ  โ  โ TAB "Regras": Edita banco/regras.csv       โ   โ                โ
โ  โ  โ                                             โ   โ                โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ                โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                โ
โ                                                                          โ
โ  โ Integraรงรฃo no Menu:                                                  โ
โ     services/menu_handler.py                                             โ
โ     Botรฃo: "Incluir Novo Exame"                                          โ
โ     Chama: CadastrosDiversosWindow(main_window)                          โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

                                    โ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 4. GAPS IDENTIFICADOS (Por que Fase 5 โ� Completa)                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  ๐ด CRรTICO (Corrigido):                                                 โ
โ     โ ANTES: import from ui.cadastros_diversos โ arquivo nรฃo existe    โ
โ     โ DEPOIS: import from services.cadastros_diversos โ correto        โ
โ                                                                          โ
โ  โ NรO IMPLEMENTADO:                                                     โ
โ                                                                          โ
โ     1. Aba "Gerenciar Exames (Registry)"                                 โ
โ        โข Deveria listar exames do registry (nรฃo CSV)                     โ
โ        โข Atualmente sรณ lista CSV                                         โ
โ                                                                          โ
โ     2. Formulรกrio Multi-Aba com Schema ExamConfig                        โ
โ        โข Deveria ter 6 abas para os 13 campos da classe                 โ
โ        โข Atualmente tem 4 abas, 5 campos cada (CSV-basic)               โ
โ                                                                          โ
โ     3. Save em JSON                                                      โ
โ        โข Deveria serializar ExamConfig โ config/exams/<slug>.json       โ
โ        โข Atualmente salva apenas em CSV                                  โ
โ                                                                          โ
โ     4. Recarregar Registry                                               โ
โ        โข Deveria chamar registry.load() apรณs salvar                     โ
โ        โข Atualmente nรฃo integra com registry                             โ
โ                                                                          โ
โ     5. Validaรงรฃo de Schema                                               โ
โ        โข Deveria validar faixas_ct (detect < inconc_min < inconc_max)   โ
โ        โข Atualmente valida apenas "nome_exame โ� vazio"                  โ
โ                                                                          โ
โ  โ�๏ธ  INCONSISTรNCIA:                                                      โ
โ      โข Fase 3 usa JSON como "fonte de verdade"                           โ
โ      โข Fase 5 atual edita apenas CSV                                     โ
โ      โข Resultado: mudanรงas CSV nรฃo refletem no sistema                   โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

                                    โ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 5. COMPARAรรO LADO-A-LADO                                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  Requisito Fase 5           โ Implementado    โ Status                  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  Tela "Gerenciar Exames"    โ โ (CSV)        โ โ�๏ธ Nรฃo registry        โ
โ  Lista exames carregados    โ โ (CSV)        โ โ�๏ธ Deveria ser registry โ
โ  Formulรกrio Novo/Editar     โ โ (5-campo)    โ โ�๏ธ Faltam 8 campos     โ
โ  Campos do schema            โ โ              โ โ�๏ธ Faltam alvos, etc   โ
โ  Validar dados               โ โ�๏ธ (mรญnimo)     โ โ�๏ธ Sem schema validate  โ
โ  Salvar config/exams/...jsonโ โ              โ โ�๏ธ Salva CSV            โ
โ  Recarregar registry        โ โ              โ โ�๏ธ Sem integraรงรฃo       โ
โ                                                                          โ
โ  COMPLETUDE: โ UI 60% / โ Integraรงรฃo Registry 0%                      โ
โ  RESULTADO: ~25% Fase 5 completa (UI bรกsica)                            โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

                                    โ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 6. PLANO DE AรรO PARA COMPLETAR                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                          โ
โ  SPRINT 1 (30 min):                                                      โ
โ    โ Fix import menu_handler.py (FEITO)                                 โ
โ    ๐ Testar botรฃo "Incluir Novo Exame"                                  โ
โ                                                                          โ
โ  SPRINT 2 (3 horas):                                                     โ
โ    ๐ Adicionar aba "Exames (Registry)" em cadastros_diversos.py        โ
โ    ๐ UI: listbox com exames do registry                                 โ
โ    ๐ Botรตes: Novo, Editar, Excluir                                      โ
โ                                                                          โ
โ  SPRINT 3 (3 horas):                                                     โ
โ    ๐ Criar formulรกrio multi-aba (6 abas):                               โ
โ      โข Bรกsico (6 campos)                                                 โ
โ      โข Alvos (2 campos)                                                  โ
โ      โข Faixas CT (5 campos)                                              โ
โ      โข RP (1 campo)                                                      โ
โ      โข Export (2 campos)                                                 โ
โ      โข Controles (2 campos)                                              โ
โ                                                                          โ
โ  SPRINT 4 (2 horas):                                                     โ
โ    ๐ Implementar save JSON:                                             โ
โ      โข ExamConfig โ JSON serialization                                   โ
โ      โข Salvar em config/exams/{slug}.json                                โ
โ                                                                          โ
โ  SPRINT 5 (2 horas):                                                     โ
โ    ๐ Integraรงรฃo registry:                                               โ
โ      โข registry.load() apรณs salvar                                       โ
โ      โข Recarregar UI listbox                                             โ
โ                                                                          โ
โ  SPRINT 6 (1 hora):                                                      โ
โ    ๐ Validaรงรฃo de schema:                                               โ
โ      โข faixas_ct check                                                   โ
โ      โข alvos check                                                       โ
โ                                                                          โ
โ  SPRINT 7 (1 hora):                                                      โ
โ    ๐ Testes e fixes                                                     โ
โ                                                                          โ
โ  TOTAL: ~12-13 horas                                                     โ
โ                                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CONCLUSรO: Fase 5 estรก 25% completa. Precisa de integraรงรฃo Registry       โ
โ            para ser produรงรฃo-ready. Fix crรญtico (import) foi aplicado.     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ Prรณximas Aรงรตes

1. โ **Corrigido:** Import em menu_handler.py
2. ๐ **Testar:** Botรฃo no menu funciona
3. ๐ **Implementar:** Aba Registry com multi-formulรกrio
4. ๐ **Integrar:** JSON save + registry reload

